{"version":3,"file":"index.js","sources":["../../packages/utils/Logger/stylize.ts","../../packages/utils/Logger/tag.ts","../../packages/utils/Logger/utils.ts","../../packages/utils/Logger/index.ts","../../packages/Middleware/index.ts","../../packages/utils/Error/MiddlewareError.ts"],"sourcesContent":["const ANSI: any = {\n  /* 1 */ 'b': 1, // bold (increased intensity)\n  /* 2 */ 'f': 2, // faint (decreased intensity)\n  /* 3 */ 'i': 3, // italic\n  /* 4 */ 'u': 4, // underline\n  /* 5 */ 'l': 5, // blink slow\n  /* 6 */ 'h': 6, // blink rapid\n  /* 7 */ 'n': 7, // negative\n  /* 8 */ 'c': 8, // conceal\n  /* 9 */ 's': 9, // strikethrough\n};\n\nconst COLOR = [\n  /* 1 */ 'black',\n  /* 2 */ 'red',\n  /* 3 */ 'green',\n  /* 4 */ 'yellow',\n  /* 5 */ 'blue',\n  /* 6 */ 'magenta',\n  /* 7 */ 'cyan',\n  /* 8 */ 'white',\n  /* 9 */ 'crimson',\n];\n\nfunction esc(style: string | number, value: string) {\n  if (style) {\n    return `\\x1b[${style}m${value}\\x1b[0m`;\n  }\n\n  return value;\n}\n\nfunction stylize(styles: string, text: string): string {\n  for(const style of styles.split(',')) {\n    if (style.length === 1) {\n      text = esc(ANSI[style], text);\n    } else {\n      const [fg, bg] = style.split('/');\n      const fgColor = COLOR.indexOf(fg);\n      const bgColor = COLOR.indexOf(bg);\n\n      if (fgColor > -1) {\n        text = esc(30 + fgColor, text);\n      }\n      if (bgColor > -1) {\n        text = esc( 40 + bgColor, text);\n      }\n    }\n  }\n\n  return text;\n}\n\nexport default stylize;\nmodule.exports = stylize;\n","import stylize from './stylize';\n\nexport type TagReturnType = (strings: string | string[], ...values: unknown[]) => string;\n\nfunction Tag(styles: string): TagReturnType {\n  return (strings, ...values) => {\n    if (typeof strings === 'string') {\n      return stylize(styles, strings);\n    }\n\n    const result = [strings[0]];\n    let i = 1;\n\n    for (const val of values) {\n      const str = strings[i++];\n      result.push(String(val), str);\n    }\n\n    return stylize(styles, result.join(''));\n  }\n}\n\nexport default Tag;\nmodule.exports = Tag;\n","import Tag, { TagReturnType } from '@/utils/Logger/tag';\n\nexport interface IDecorator {\n  titleTag: TagReturnType;\n  messageTag: TagReturnType;\n  defaultTitle: string;\n}\n\nexport const Error: IDecorator = {\n  titleTag: Tag('b,i,red/red'),\n  messageTag: Tag('red/red'),\n  defaultTitle: 'Error',\n};\n\nexport const Warn: IDecorator = {\n  titleTag: Tag('b,i,yellow/yellow'),\n  messageTag: Tag('yellow/yellow'),\n  defaultTitle: 'Warn',\n};\n\nexport const Info: IDecorator = {\n  titleTag: Tag('b,blue'),\n  messageTag: Tag('blue'),\n  defaultTitle: 'Info',\n}\n\nexport const Success: IDecorator = {\n  titleTag: Tag('b,green'),\n  messageTag: Tag('green'),\n  defaultTitle: 'Success',\n}\n\nexport const Put: IDecorator = {\n  titleTag: Tag('b,cyan'),\n  messageTag: Tag('cyan'),\n  defaultTitle: 'Put',\n}\n\nexport const Patch: IDecorator = {\n  titleTag: Tag('b,crimson'),\n  messageTag: Tag('crimson'),\n  defaultTitle: 'Patch',\n}\n\nexport const Data: IDecorator = {\n  titleTag: Tag('b,magenta'),\n  messageTag: Tag('magenta'),\n  defaultTitle: 'Data',\n}\n\nexport const urlRegex = /(https?:\\/\\/\\S+)/gm;\n","import Concollor from '@/utils/Logger/concollor';\nimport { IDecorator, Info, urlRegex, Warn, Error, Success, Data, Put, Patch } from '@/utils/Logger/utils';\n\ntype printType = (message: string, title?: string) => void;\n\ninterface ILogger {\n  error: printType;\n  warn: printType;\n  info: printType;\n  success: printType;\n  put: printType;\n  patch: printType;\n  data: printType;\n}\n\ntype Log = ILogger & ((message: string) => void);\n\nfunction Log(message: string): void {\n  const text = String(message);\n\n  console.log(text.replace(urlRegex, (url) => Concollor`${url}(u,blue)`));\n}\n\nfunction _print({ titleTag, messageTag, defaultTitle }: IDecorator) {\n  return function (message: string, title?: string) {\n    console.log(titleTag(`${ title ?? defaultTitle}: `) + messageTag(`${message}`));\n  }\n}\n\nLog.error = _print(Error);\nLog.warn = _print(Warn);\nLog.info = _print(Info);\nLog.success = _print(Success);\nLog.put = _print(Put);\nLog.patch = _print(Patch);\nLog.data = _print(Data);\n\nexport default Log as Log;\nmodule.exports = Log as Log;\n","import MiddlewareError from '@/utils/Error/MiddlewareError';\nimport { PreHandler, PreHandlerAsync } from '@/Middleware/type';\nimport { IncomingMessageType, ServerResponseType } from '@/Routing/types';\n\nclass Middleware {\n  static readonly middlewares: PreHandler[] = [];\n  static readonly asyncMiddlewares: PreHandlerAsync[] = [];\n\n  runMiddlewaresSync(\n    request: IncomingMessageType,\n    response: ServerResponseType,\n  ): void {\n    const next = (error?: unknown): void => {\n      if (error instanceof Error) {\n        throw MiddlewareError(error.message, 'Middleware');\n      }\n    }\n\n    for (const middleware of Middleware.middlewares) {\n      middleware(request, response, next)\n    }\n  }\n\n  static use(preHandler: PreHandler) {\n    Middleware.middlewares.push(preHandler);\n  }\n}\n\nexport default Middleware;\nmodule.exports = Middleware;\n","import Logger from '@/utils/Logger';\n\nfunction MiddlewareError(\n  message: string,\n  middlewareName: string,\n) {\n  Logger.error(message, `Middleware Error in ${middlewareName}`);\n\n  return new Error(message);\n}\n\nexport default MiddlewareError;\n"],"names":["ANSI","b","f","i","u","l","h","n","c","s","COLOR","esc","style","value","stylize","styles","text","split","length","fg","bg","fgColor","indexOf","bgColor","Tag","strings","values","result","val","str","push","String","join","module","exports","Error","titleTag","messageTag","defaultTitle","Warn","Info","Success","Put","Patch","Data","urlRegex","Log","message","console","log","replace","url","Concollor","_print","title","error","warn","info","success","put","patch","data","Middleware","static","runMiddlewaresSync","request","response","next","middlewareName","Logger","middleware","middlewares","preHandler"],"mappings":"wCAAA,MAAMA,EAAY,CACRC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,GAGTC,EAAQ,CACJ,QACA,MACA,QACA,SACA,OACA,UACA,OACA,QACA,WAGV,SAASC,EAAIC,EAAwBC,GACnC,OAAID,EACK,KAAQA,KAASC,QAGnBA,CACT,CAEA,SAASC,EAAQC,EAAgBC,GAC/B,IAAI,MAAMJ,KAASG,EAAOE,MAAM,KAC9B,GAAqB,IAAjBL,EAAMM,OACRF,EAAOL,EAAIX,EAAKY,GAAQI,OACnB,CACL,MAAOG,EAAIC,GAAMR,EAAMK,MAAM,KACvBI,EAAUX,EAAMY,QAAQH,GACxBI,EAAUb,EAAMY,QAAQF,GAE1BC,GAAW,IACbL,EAAOL,EAAI,GAAKU,EAASL,IAEvBO,GAAW,IACbP,EAAOL,EAAK,GAAKY,EAASP,GAE7B,CAGH,OAAOA,CACT,CC/CA,SAASQ,EAAIT,GACX,MAAO,CAACU,KAAYC,KAClB,GAAuB,iBAAZD,EACT,OAAOX,EAAQC,EAAQU,GAGzB,MAAME,EAAS,CAACF,EAAQ,IACxB,IAAItB,EAAI,EAER,IAAK,MAAMyB,KAAOF,EAAQ,CACxB,MAAMG,EAAMJ,EAAQtB,KACpBwB,EAAOG,KAAKC,OAAOH,GAAMC,EAC1B,CAED,OAAOf,EAAQC,EAAQY,EAAOK,KAAK,IAAI,CAE3C,CDkCAC,OAAOC,QAAUpB,EC/BjBmB,OAAOC,QAAUV,ECfV,MAAMW,EAAoB,CAC/BC,SAAUZ,EAAI,eACda,WAAYb,EAAI,WAChBc,aAAc,SAGHC,EAAmB,CAC9BH,SAAUZ,EAAI,qBACda,WAAYb,EAAI,iBAChBc,aAAc,QAGHE,EAAmB,CAC9BJ,SAAUZ,EAAI,UACda,WAAYb,EAAI,QAChBc,aAAc,QAGHG,EAAsB,CACjCL,SAAUZ,EAAI,WACda,WAAYb,EAAI,SAChBc,aAAc,WAGHI,EAAkB,CAC7BN,SAAUZ,EAAI,UACda,WAAYb,EAAI,QAChBc,aAAc,OAGHK,EAAoB,CAC/BP,SAAUZ,EAAI,aACda,WAAYb,EAAI,WAChBc,aAAc,SAGHM,EAAmB,CAC9BR,SAAUZ,EAAI,aACda,WAAYb,EAAI,WAChBc,aAAc,QAGHO,EAAW,qBCjCxB,SAASC,EAAIC,GACX,MAAM/B,EAAOe,OAAOgB,GAEpBC,QAAQC,IAAIjC,EAAKkC,QAAQL,GAAWM,GAAQC,CAAS,GAAGD,cAC1D,CAEA,SAASE,GAAOjB,SAAEA,EAAQC,WAAEA,EAAUC,aAAEA,IACtC,OAAO,SAAUS,EAAiBO,GAChCN,QAAQC,IAAIb,EAAS,GAAIkB,GAAShB,OAAoBD,EAAW,GAAGU,KACtE,CACF,CAEAD,EAAIS,MAAQF,EAAOlB,GACnBW,EAAIU,KAAOH,EAAOd,GAClBO,EAAIW,KAAOJ,EAAOb,GAClBM,EAAIY,QAAUL,EAAOZ,GACrBK,EAAIa,IAAMN,EAAOX,GACjBI,EAAIc,MAAQP,EAAOV,GACnBG,EAAIe,KAAOR,EAAOT,GAGlBX,OAAOC,QAAUY,EClCjB,MAAMgB,EACJC,mBAA4C,GAC5CA,wBAAsD,GAEtDC,mBACEC,EACAC,GAEA,MAAMC,EAAQZ,IACZ,GAAIA,aAAiBpB,MACnB,MCXNY,EDW4BQ,EAAMR,QCVlCqB,EDU2C,aCR3CC,EAAOd,MAAMR,EAAS,uBAAuBqB,KAEtC,IAAIjC,MAAMY,GANnB,IACEA,EACAqB,CDWK,EAGH,IAAK,MAAME,KAAcR,EAAWS,YAClCD,EAAWL,EAASC,EAAUC,EAEjC,CAEDJ,WAAWS,GACTV,EAAWS,YAAYzC,KAAK0C,EAC7B,EAIHvC,OAAOC,QAAU4B"}